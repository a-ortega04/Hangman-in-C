#include "stdio.h"
#include "stdlib.h"
#include "string.h"

#define CHANCE 6


void printBody(int numeroVidas, char* body) {
	printf("\tNumero de Vidas :%d\n", numeroVidas);
	switch(numeroVidas) {

		case 6: body[6] = '\\'; break;
		case 5: body[5] = '/'; break;
		case 4: body[4] = '\\'; break;
		case 3: body[3] = '|'; break;
		case 2: body[2] = '/'; break;
		case 1: body[1] = ')', body[0] = '('; break;
		default: break;

	}

	printf("\t _________\n"
	       "\t|         |\n"
	       "\t|        %c %c\n"
	       "\t|        %c%c%c\n"
	       "\t|        %c %c\n"
	       "\t|             \n"
	       "\t|             ", body[0], body[1], body[2],
	       body[3], body[4], body[5], body[6]);
}

int main() {

    srand(time(NULL));

    char palabras[][16] = {
        "rojo",
        "control",
        "evolucion",
        "panorama",
        "indirecto",
        "manzana",
        "ventilador",
        "cobija"
    };

    int randomIndex = rand() % 8;

    int numeroVidas = 6;
    int correcto = 0;
    int excorrecto = 0;
    char *body = malloc(CHANCE+1);

    int lenghtOfWord = strlen(palabras[randomIndex]);



    int letterGuessed[12] = { 0,0,0,0,0,0,0,0,0,0,0,0 };

    int quit = 0;


    int loopIndex = 0;

    char guess[16];
    char letraAdivinada;

    printf("------guessWords:%s randomIndex: %d lenghtOfWord: %d\n", //quitar esto al final
        palabras[randomIndex],
        randomIndex,
        lenghtOfWord);

    printf("Ahorcado!!!!!!!!!!!\n");
    printf("Reglas: \n");
	printf("6 vidas maximo.\n");
	printf("Utiliza minusculas solamente.\n");
	printf("Ejempolo : a, b, e, etc... \n");

	printBody(numeroVidas, body);


    while ( correcto < lenghtOfWord ) {

        printf("correcto hasta ahora: %d\n",correcto);
        printf("Introduce una letra:");
        fgets(guess, 16, stdin);

        if( strncmp(guess, "quit", 4) == 0) {
            quit = 1;
            break;
        }

        letraAdivinada = guess[0];

        printf("letra Adivinada:%c\n",letraAdivinada);

        excorrecto = correcto;

        for( loopIndex = 0; loopIndex < lenghtOfWord; loopIndex++) {

                if(letterGuessed[loopIndex] == 1){
                    continue;
                }


                if( letraAdivinada == palabras[randomIndex][loopIndex] ){
                    letterGuessed[loopIndex] = 1;
                    correcto++;
                    printBody(numeroVidas, body);
                }



        }

        if( excorrecto == correcto) {
            numeroVidas--;
            printf("respusta incorrecta\n");
            printBody(numeroVidas, body);
            if (numeroVidas == 0) {
                break;
            }
        } else {
            printf("correcto\n");
        }



    }

    if ( quit == 1 ) {

        printf("te saliste qlo\n");
    } else if (numeroVidas == 0){
        printf("\nPerdiste, la palabra era: <%s>\n",palabras[randomIndex]);
    } else {
        printf("Ganaste!!!!!\n");

    }

    return 0;
}


//dibujo del colgado 1/2
//indicador de palabras ya adivinadas
//funcion de jugar otra vez
//agregar palabras al banco de palabras
//formato y dise√±o
//revisar y mejorar conforme revision
